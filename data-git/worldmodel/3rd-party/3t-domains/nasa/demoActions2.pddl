(in-package :ap)
(NEW-PREDICATE '(JOBS-DONE ?AGENT2 - CREW) NASA-DOMAIN)
(DEFINE (DURATIVE-ACTION DO-JOBS) :PARAMETERS (?AGENT2 - CREW) :VARS
           (?AGENT1 - CREW ?ROBOT - ISS-ROBOT ?SCOOP - MICRO_SCOOP__OHTS_[SQUARE_SCOOP] ?CLB -
            CREW-LOCK-BAG ?DDCU ?SPARE - DC-TO-DC-CONVERTER-UNIT ?COVER - STANCHION-MOUNT-COVER
            ?L - (HAS-ISS-LOCATION DDCU_S01A) ?BAG - MEDIUM-ORU-BAG)
           :CONDITION
           (AND (AT START (NOT (= ?AGENT1 ?AGENT2)))
                (AT START (NOT (= (HAS-OPERATOR ?ROBOT) ?AGENT1)))
                (AT START (NOT (= (HAS-OPERATOR ?ROBOT) ?AGENT2)))
                (OVER ALL (BAG-SIZE-FOR LUMINAIRE_3 ?BAG))
                (AT START (HAS-ISS-LOCATION ?DDCU ?L)) (AT START (NOT (= ?DDCU ?SPARE)))
                (AT START (CONTAINS ?COVER ?SPARE))
                (AT START (CONTAINS ?CLB ?SCOOP)))
           :EXPANSION
           (SEQUENTIAL (HAS-ISS-LOCATION ?AGENT1 AIRLOCK) (HAS-ISS-LOCATION ?BAG AIRLOCK)
            (HAS-ISS-LOCATION FISH-STRINGER_1 AIRLOCK) (HAS-ISS-LOCATION ?CLB AIRLOCK)
            (HAS-ISS-LOCATION ?COVER AIRLOCK) (HAS-ISS-LOCATION ?AGENT2 AIRLOCK)
            (PARALLEL (PREPARED-FOR ?AGENT1 EVA) (PREPARED-FOR ?AGENT2 EVA))
            (POSSESSES ?AGENT2 ?BAG)
            (PARALLEL (ITEM-RETRIEVED ?AGENT2 LUMINAIRE_3)
             (ITEM-INSTALLED ?AGENT1 MLM_PWR_CABLE_CH_1_4_1))
            (ITEM-INSTALLED-IN-PLACE ?AGENT1 _25-IN_JUMPER_1_2017)
            (PARALLEL (HAS-ISS-LOCATION ?AGENT1 AIRLOCK) (HAS-ISS-LOCATION ?AGENT2 AIRLOCK))
            (SITE-PREPPED-FOR-R&R ?AGENT1 DDCU_S01A) (HAS-ISS-LOCATION ?AGENT2 ?L)
            (REPLACED-ITEM-AT ?AGENT2 DDCU_S01A)
            (PARALLEL (HAS-ISS-LOCATION ?AGENT1 AIRLOCK) (HAS-ISS-LOCATION ?AGENT2 AIRLOCK))
            (HAS-ISS-LOCATION ?AGENT2 INTRA-VEHICLE) (HAS-ISS-LOCATION ?DDCU INTRA-VEHICLE)
            (HAS-ISS-LOCATION ?AGENT1 INTRA-VEHICLE) (HATCH-STATE AIRLOCK-HATCH LOCKED)
            (PARALLEL (PREPARED-FOR ?AGENT1 REPRESSURIZATION) (PREPARED-FOR ?AGENT2 REPRESSURIZATION)))
           :EFFECT (AT END (JOBS-DONE ?AGENT2)))
(DEFINE (PROBLEM DONE-JOBS) (:DOMAIN NASA-DOMAIN) (:SITUATION PHALCON-EVA)
           (:INIT (POSSESSES SALLY MICRO_SCOOP_4)) (:DEADLINE 390.0) (:GOAL (JOBS-DONE SALLY)))